# è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›® - æ•°æ®åº“é…ç½®å¼€å‘æ–‡æ¡£

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®æ¦‚è§ˆ](#é¡¹ç›®æ¦‚è§ˆ)
- [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
- [æ•°æ®åº“æ¨¡å‹](#æ•°æ®åº“æ¨¡å‹)
- [APIæ¥å£](#apiæ¥å£)
- [N8Né›†æˆ](#n8né›†æˆ)
- [å‰ç«¯é¡µé¢](#å‰ç«¯é¡µé¢)
- [éƒ¨ç½²è¿ç»´](#éƒ¨ç½²è¿ç»´)

---

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

### åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | ä¿¡æ¯ |
|------|------|
| **é¡¹ç›®åç§°** | è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›® |
| **å‰ç«¯åœ°å€** | http://47.237.79.9:5001 |
| **åç«¯åœ°å€** | http://47.237.79.9:5002 |
| **æ•°æ®åº“** | SQLite3 |
| **å‰ç«¯æ¡†æ¶** | Astro (SSR) |
| **åç«¯æ¡†æ¶** | Node.js + Express |
| **æ ·å¼æ¡†æ¶** | Tailwind CSS |

### æ•°æ®ç»Ÿè®¡

| æ¨¡å— | æ•°é‡ |
|------|------|
| **åŒ»é™¢** | 122å®¶ï¼ˆ5ä¸ªåŸå¸‚ï¼‰ |
| **çŸ¥è¯†é—®ç­”** | åŠ¨æ€å¢é•¿ |
| **ç”¨æˆ·åˆ†äº«** | åŠ¨æ€å¢é•¿ |
| **æœåŠ¡é¡¹ç›®** | å¾…æ·»åŠ  |

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç”¨æˆ·è®¿é—®                       â”‚
â”‚           http://47.237.79.9:5001               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              å‰ç«¯æœåŠ¡ (Astro SSR)                â”‚
â”‚                  Port: 5001                      â”‚
â”‚  - /reviews (åŒ»é™¢åˆ—è¡¨)                           â”‚
â”‚  - /knowledge (çŸ¥è¯†é—®ç­”)                         â”‚
â”‚  - /sharing (ç”¨æˆ·åˆ†äº«)                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“ APIè°ƒç”¨
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           åç«¯æœåŠ¡ (Node.js + Express)           â”‚
â”‚                  Port: 5002                      â”‚
â”‚  - /api/hospitals                                â”‚
â”‚  - /api/knowledge                                â”‚
â”‚  - /api/user-shares                              â”‚
â”‚  - /api/webhooks/n8n â† N8Né›†æˆå…¥å£              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            æ•°æ®åº“ (SQLite3)                      â”‚
â”‚       /backend/data/medical.db                   â”‚
â”‚  - hospitals (122æ¡)                             â”‚
â”‚  - knowledge (åŠ¨æ€)                              â”‚
â”‚  - user_shares (åŠ¨æ€)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ’¾ æ•°æ®åº“æ¨¡å‹

### 1. åŒ»é™¢æ¨¡å‹ (hospitals)

#### å¿…å¡«å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `name` | VARCHAR(200) | åŒ»é™¢åç§° | "Bá»‡nh viá»‡n Da liá»…u TP.HCM" |
| `description` | TEXT | åŒ»é™¢æè¿° | "Bá»‡nh viá»‡n chuyÃªn khoa..." |

#### åŸºæœ¬ä¿¡æ¯å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `address` | VARCHAR(500) | å¦ | å®Œæ•´åœ°å€ |
| `city` | VARCHAR(100) | å¦ | åŸå¸‚ï¼ˆTP.HCM/HÃ  Ná»™iç­‰ï¼‰ |
| `district` | VARCHAR(100) | å¦ | åŒºåŸŸ |
| `phone` | VARCHAR(50) | å¦ | è”ç³»ç”µè¯ |
| `email` | VARCHAR(100) | å¦ | ç”µå­é‚®ç®± |
| `website` | VARCHAR(500) | å¦ | å®˜æ–¹ç½‘ç«™ |
| `logo_url` | VARCHAR(500) | å¦ | Logo URL |

#### è¯„ä»·å­—æ®µ

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `rating` | DECIMAL(3,2) | - | è¯„åˆ†ï¼ˆ4.0-4.8ï¼‰ |
| `review_count` | INTEGER | 0 | è¯„ä»·æ•°é‡ |

#### JSONæ•°ç»„å­—æ®µ

| å­—æ®µ | ç±»å‹ | ç¤ºä¾‹ |
|------|------|------|
| `images` | JSON | `["url1.jpg", "url2.jpg"]` |
| `specialties` | JSON | `["Tháº©m má»¹ khuÃ´n máº·t", "NÃ¢ng ngá»±c"]` |
| `services` | JSON | `["TiÃªm Botox", "Laser trá»‹ nÃ¡m"]` |
| `facilities` | JSON | `["PhÃ²ng má»• vÃ´ trÃ¹ng", "MÃ¡y laser"]` |
| `certifications` | JSON | `["ISO 9001", "JCI"]` |

#### å±æ€§å­—æ®µ

| å­—æ®µ | ç±»å‹ | å¯é€‰å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `level` | TEXT | A+, A, B | åŒ»é™¢ç­‰çº§ |
| `type` | TEXT | public/private/international | åŒ»é™¢ç±»å‹ |
| `status` | TEXT | active/inactive | çŠ¶æ€ |
| `data_source` | TEXT | manual/api/n8n | æ•°æ®æ¥æº |

#### æ‰©å±•å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `established_year` | INTEGER | æˆç«‹å¹´ä»½ |
| `doctors_count` | INTEGER | åŒ»ç”Ÿæ•°é‡ |
| `beds_count` | INTEGER | åºŠä½æ•°é‡ |

#### å®Œæ•´ç¤ºä¾‹

```json
{
  "name": "Bá»‡nh viá»‡n Da liá»…u TP.HCM",
  "description": "Bá»‡nh viá»‡n chuyÃªn khoa da liá»…u...",
  "address": "Sá»‘ 2 Nguyá»…n ThÃ´ng, Quáº­n 3, TP.HCM",
  "city": "TP.HCM",
  "district": "Quáº­n 3",
  "phone": "+84 28 3930 2222",
  "email": "bvdl@hcm.gov.vn",
  "website": "https://bvdl.org.vn/",
  "rating": 4.6,
  "review_count": 856,
  "specialties": ["Tháº©m má»¹ khuÃ´n máº·t", "ChÄƒm sÃ³c da", "TiÃªm Botox & Filler"],
  "services": [
    "TiÃªm Botox - XÃ³a nhÄƒn, nÃ¢ng cÆ¡ máº·t",
    "TiÃªm Filler - LÃ m Ä‘áº§y rÃ£nh nhÄƒn",
    "Laser trá»‹ nÃ¡m, tÃ n nhang"
  ],
  "facilities": [
    "PhÃ²ng tiÃªm chÃ­ch vÃ´ trÃ¹ng Ä‘áº¡t chuáº©n",
    "MÃ¡y laser Nd:YAG, CO2 fractional"
  ],
  "certifications": [
    "Chá»©ng nháº­n bá»‡nh viá»‡n háº¡ng A",
    "ISO 9001:2015"
  ],
  "level": "A",
  "type": "public",
  "status": "active",
  "established_year": 1975,
  "doctors_count": 120
}
```

---

### 2. çŸ¥è¯†é—®ç­”æ¨¡å‹ (knowledge)

#### å¿…å¡«å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `question` | VARCHAR(500) | é—®é¢˜å†…å®¹ | "Pháº«u thuáº­t mÅ©i cÃ³ Ä‘au khÃ´ng?" |
| `answer` | TEXT | ç­”æ¡ˆå†…å®¹ | "KhÃ´ng Ä‘au vÃ¬ Ä‘Æ°á»£c gÃ¢y tÃª..." |

#### å¯é€‰å­—æ®µï¼ˆæœ‰é»˜è®¤å€¼ï¼‰

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `category` | VARCHAR(100) | "TÆ° váº¥n chung" | åˆ†ç±» |
| `subcategory` | VARCHAR(100) | null | å­åˆ†ç±» |
| `doctor_name` | VARCHAR(100) | "BÃ¡c sÄ© chuyÃªn khoa" | åŒ»ç”Ÿå§“å |
| `doctor_title` | VARCHAR(100) | null | åŒ»ç”ŸèŒç§° |
| `doctor_avatar` | VARCHAR(500) | null | åŒ»ç”Ÿå¤´åƒURL |
| `hospital_name` | VARCHAR(200) | null | åŒ»é™¢åç§° |
| `difficulty_level` | ENUM | "beginner" | éš¾åº¦ï¼ˆbeginner/intermediate/advancedï¼‰ |
| `status` | ENUM | "published" | çŠ¶æ€ï¼ˆdraft/published/archivedï¼‰ |
| `source` | ENUM | "manual" | æ¥æºï¼ˆmanual/api/n8nï¼‰ |

#### è‡ªåŠ¨å­—æ®µ

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `like_count` | INTEGER | 0 | ç‚¹èµæ•° |
| `view_count` | INTEGER | 0 | æµè§ˆæ•°ï¼ˆè¯¦æƒ…é¡µè‡ªåŠ¨+1ï¼‰ |
| `external_id` | VARCHAR(100) | null | å¤–éƒ¨ç³»ç»ŸIDï¼ˆé˜²é‡å¤ï¼‰ |
| `tags` | JSON | null | æ ‡ç­¾æ•°ç»„ |

#### å®Œæ•´ç¤ºä¾‹

```json
{
  "question": "Pháº«u thuáº­t mÅ©i cáº§n bao lÃ¢u Ä‘á»ƒ phá»¥c há»“i?",
  "answer": "Thá»i gian phá»¥c há»“i khoáº£ng 1-2 tuáº§n cho phá»¥c há»“i ban Ä‘áº§u...",
  "category": "Pháº«u thuáº­t mÅ©i",
  "doctor_name": "BS Nguyá»…n VÄƒn A",
  "doctor_title": "TrÆ°á»Ÿng khoa Pháº«u thuáº­t Tháº©m má»¹",
  "hospital_name": "Bá»‡nh viá»‡n tháº©m má»¹ TP.HCM",
  "tags": ["pháº«u thuáº­t", "mÅ©i", "phá»¥c há»“i"],
  "difficulty_level": "beginner"
}
```

#### æœ€ç®€ç¤ºä¾‹ï¼ˆN8Næäº¤ï¼‰

```json
{
  "question": "é—®é¢˜å†…å®¹",
  "answer": "ç­”æ¡ˆå†…å®¹"
}
```

---

### 3. ç”¨æˆ·åˆ†äº«æ¨¡å‹ (user_shares)

#### å¿…å¡«å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|------|
| `title` | VARCHAR(200) | åˆ†äº«æ ‡é¢˜ | "Tráº£i nghiá»‡m NÃ¢ng mÅ©i Sá»¥n sÆ°á»n" |
| `content` | TEXT | åˆ†äº«å†…å®¹ | "Kinh nghiá»‡m há»“i phá»¥c..." |
| `author_name` | VARCHAR(100) | ä½œè€…å§“å | "åŒ¿åç”¨æˆ·"ï¼ˆN8Nè‡ªåŠ¨å¡«å……ï¼‰ |

#### å¯é€‰å­—æ®µ

| å­—æ®µ | ç±»å‹ | è¯´æ˜ |
|------|------|------|
| `author_avatar` | VARCHAR(500) | ä½œè€…å¤´åƒURL |
| `surgery_type` | VARCHAR(100) | æ‰‹æœ¯ç±»å‹ï¼ˆæ™ºèƒ½è¯†åˆ«ï¼‰ |
| `hospital_name` | VARCHAR(200) | åŒ»é™¢åç§° |
| `rating` | INTEGER(1-5) | è¯„åˆ†ï¼ˆ1-5æ˜Ÿï¼‰ |
| `images` | JSON | å›¾ç‰‡URLæ•°ç»„ |
| `tags` | JSON | æ ‡ç­¾æ•°ç»„ |

#### è‡ªåŠ¨å­—æ®µ

| å­—æ®µ | ç±»å‹ | é»˜è®¤å€¼ | è¯´æ˜ |
|------|------|--------|------|
| `view_count` | INTEGER | 0 | æµè§ˆæ•°ï¼ˆè¯¦æƒ…é¡µè‡ªåŠ¨+1ï¼‰ |
| `like_count` | INTEGER | 0 | ç‚¹èµæ•° |
| `status` | ENUM | "published" | çŠ¶æ€ |
| `source` | ENUM | "manual" | æ¥æº |
| `external_id` | VARCHAR(100) | null | å¤–éƒ¨ç³»ç»ŸID |

#### æ™ºèƒ½åˆ†ç±»å…³é”®è¯

ç³»ç»Ÿä¼šè‡ªåŠ¨æ ¹æ®æ ‡é¢˜å’Œå†…å®¹è¯†åˆ«ä»¥ä¸‹åˆ†ç±»ï¼š

| åˆ†ç±» | å…³é”®è¯ |
|------|--------|
| **Pháº«u thuáº­t mÅ©i** | mÅ©i, nÃ¢ng mÅ©i, sá»¥n mÅ©i, mÅ©i cao, thu gá»n cÃ¡nh mÅ©i |
| **Pháº«u thuáº­t máº¯t** | máº¯t, mÃ­ máº¯t, cáº¯t mÃ­, báº¥m mÃ­, máº¯t to, nháº¥n mÃ­ |
| **ÄÆ°á»ng nÃ©t khuÃ´n máº·t** | khuÃ´n máº·t, gá»t máº·t, v-line, cáº±m, mÃ¡, hÃ m |
| **Tháº©m má»¹ cÆ¡ thá»ƒ** | ngá»±c, nÃ¢ng ngá»±c, eo, bá»¥ng, hÃºt má»¡, giáº£m bÃ©o |
| **LÃ m Ä‘áº¹p da** | da, tráº» hÃ³a, tráº¯ng da, laser, filler, botox |

#### å®Œæ•´ç¤ºä¾‹

```json
{
  "title": "Tráº£i nghiá»‡m NÃ¢ng mÅ©i Sá»¥n sÆ°á»n táº¡i TP.HCM",
  "content": "Chia sáº» chi tiáº¿t vá» quÃ¡ trÃ¬nh pháº«u thuáº­t vÃ  phá»¥c há»“i...",
  "author_name": "Chá»‹ Nguyá»…n",
  "surgery_type": "Pháº«u thuáº­t mÅ©i",
  "hospital_name": "Bá»‡nh viá»‡n tháº©m má»¹ TP.HCM",
  "rating": 5,
  "images": ["before.jpg", "after.jpg"],
  "tags": ["nÃ¢ng mÅ©i", "sá»¥n sÆ°á»n", "TP.HCM"]
}
```

#### æœ€ç®€ç¤ºä¾‹ï¼ˆN8Næäº¤ï¼‰

```json
{
  "title": "æ ‡é¢˜",
  "content": "å†…å®¹"
}
```
è‡ªåŠ¨å¡«å……ï¼šauthor_name="åŒ¿åç”¨æˆ·", surgery_type=æ™ºèƒ½è¯†åˆ«, rating=5

---

## ğŸ”Œ APIæ¥å£

### åŒ»é™¢ API

#### GET /api/hospitals
è·å–åŒ»é™¢åˆ—è¡¨

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | integer | å¦ | é¡µç ï¼ˆé»˜è®¤1ï¼‰ |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤10ï¼‰ |
| city | string | å¦ | åŸå¸‚ç­›é€‰ |
| type | string | å¦ | ç±»å‹ï¼ˆpublic/private/internationalï¼‰ |
| level | string | å¦ | ç­‰çº§ï¼ˆA+/A/Bï¼‰ |
| search | string | å¦ | æœç´¢å…³é”®è¯ |
| sort | string | å¦ | æ’åºå­—æ®µï¼ˆé»˜è®¤ratingï¼‰ |
| order | string | å¦ | æ’åºæ–¹å‘ï¼ˆASC/DESCï¼Œé»˜è®¤DESCï¼‰ |

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": 15,
      "name": "FV Hospital",
      "city": "TP.HCM",
      "rating": 4.8,
      "specialties": ["Tháº©m má»¹ khuÃ´n máº·t", "Tráº» hÃ³a da"],
      ...
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 122,
    "pages": 13
  }
}
```

#### GET /api/hospitals/:id
è·å–åŒ»é™¢è¯¦æƒ…

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "data": {
    "id": 15,
    "name": "FV Hospital",
    "description": "Bá»‡nh viá»‡n quá»‘c táº¿...",
    "address": "6 Nguyá»…n LÆ°Æ¡ng Báº±ng, Quáº­n 7, TP.HCM",
    "phone": "+84 28 5411 3333",
    "rating": 4.8,
    "services": ["TiÃªm Botox", "Laser"],
    "facilities": ["PhÃ²ng má»• vÃ´ trÃ¹ng", "MÃ¡y laser"],
    "certifications": ["JCI", "ISO 9001"],
    ...
  }
}
```

---

### çŸ¥è¯†é—®ç­” API

#### GET /api/knowledge
è·å–é—®ç­”åˆ—è¡¨

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | integer | å¦ | é¡µç  |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ |
| category | string | å¦ | åˆ†ç±»ç­›é€‰ |
| search | string | å¦ | æœç´¢å…³é”®è¯ |
| status | string | å¦ | çŠ¶æ€ï¼ˆé»˜è®¤publishedï¼‰ |

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "data": [
    {
      "id": 1,
      "question": "Pháº«u thuáº­t mÅ©i cÃ³ Ä‘au khÃ´ng?",
      "answer": "KhÃ´ng Ä‘au vÃ¬ Ä‘Æ°á»£c gÃ¢y tÃª...",
      "category": "Pháº«u thuáº­t mÅ©i",
      "doctor_name": "BÃ¡c sÄ© chuyÃªn khoa",
      "like_count": 128,
      "view_count": 256
    }
  ],
  "pagination": {...}
}
```

#### POST /api/knowledge
åˆ›å»ºé—®ç­”ï¼ˆå®Œæ•´å­—æ®µï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "question": "é—®é¢˜",
  "answer": "ç­”æ¡ˆ",
  "category": "åˆ†ç±»",
  "doctor_name": "åŒ»ç”Ÿå"
}
```

#### POST /api/knowledge/n8n
N8Nä¸“ç”¨æ¥å£ï¼ˆæœ€ç®€ï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "question": "é—®é¢˜",
  "answer": "ç­”æ¡ˆ"
}
```

#### POST /api/knowledge/:id/like
ç‚¹èµ

**å“åº”**ï¼š
```json
{
  "success": true,
  "message": "ç‚¹èµæˆåŠŸ",
  "data": { "like_count": 129 }
}
```

---

### ç”¨æˆ·åˆ†äº« API

#### GET /api/user-shares
è·å–åˆ†äº«åˆ—è¡¨

**è¯·æ±‚å‚æ•°**ï¼š
| å‚æ•° | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| page | integer | å¦ | é¡µç  |
| limit | integer | å¦ | æ¯é¡µæ•°é‡ |
| surgery_type | string | å¦ | æ‰‹æœ¯ç±»å‹ç­›é€‰ |
| search | string | å¦ | æœç´¢å…³é”®è¯ |
| status | string | å¦ | çŠ¶æ€ï¼ˆé»˜è®¤publishedï¼‰ |

#### POST /api/user-shares
åˆ›å»ºåˆ†äº«ï¼ˆå®Œæ•´å­—æ®µï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "title": "æ ‡é¢˜",
  "content": "å†…å®¹",
  "author_name": "ä½œè€…",
  "surgery_type": "Pháº«u thuáº­t mÅ©i",
  "hospital_name": "BV tháº©m má»¹",
  "rating": 5
}
```

#### POST /api/user-shares/n8n
N8Nä¸“ç”¨æ¥å£ï¼ˆæœ€ç®€ï¼‰

**è¯·æ±‚ä½“**ï¼š
```json
{
  "title": "æ ‡é¢˜",
  "content": "å†…å®¹"
}
```

**è‡ªåŠ¨å¡«å……**ï¼š
- author_name: "NgÆ°á»i dÃ¹ng áº©n danh"ï¼ˆåŒ¿åç”¨æˆ·ï¼‰
- surgery_type: æ™ºèƒ½è¯†åˆ«
- rating: 5

#### PUT /api/user-shares/:id
æ›´æ–°åˆ†äº«

#### DELETE /api/user-shares/:id
åˆ é™¤åˆ†äº«

#### POST /api/user-shares/:id/like
ç‚¹èµ

---

### é€šç”¨ Webhook API

#### POST /api/webhooks/n8n
é€šç”¨N8N Webhookæ¥å£

**æ”¯æŒçš„type**ï¼š
- `user_share` - ç”¨æˆ·åˆ†äº«
- `knowledge` - çŸ¥è¯†é—®ç­”
- `hospital` - åŒ»é™¢
- `service` - æœåŠ¡
- `contact` - è”ç³»

**è¯·æ±‚ä½“æ ¼å¼**ï¼š
```json
{
  "type": "knowledge",
  "data": {
    "question": "é—®é¢˜",
    "answer": "ç­”æ¡ˆ"
  }
}
```

**é˜²é‡å¤æœºåˆ¶**ï¼š
- é€šè¿‡ `data.external_id` å­—æ®µ
- ç›¸åŒ external_id ä¼šæ›´æ–°è€Œéæ–°å»º

#### POST /api/webhooks/batch
æ‰¹é‡å¤„ç†

**è¯·æ±‚ä½“**ï¼š
```json
{
  "items": [
    {
      "type": "knowledge",
      "data": {"question": "Q1", "answer": "A1"}
    },
    {
      "type": "user_share",
      "data": {"title": "T1", "content": "C1"}
    }
  ]
}
```

#### GET /api/webhooks/sync-status
æŸ¥çœ‹æ•°æ®ç»Ÿè®¡

**å“åº”ç¤ºä¾‹**ï¼š
```json
{
  "success": true,
  "data": {
    "user_shares": 10,
    "knowledge": 15,
    "hospitals": 122,
    "services": 0,
    "contacts": 5
  }
}
```

---

## ğŸ”— N8Né›†æˆæŒ‡å—

### æ¨èæ¥å£å¯¹æ¯”

| åŠŸèƒ½ | æ¨èæ¥å£ | æ•°æ®æ ¼å¼ | ä¼˜åŠ¿ |
|------|---------|---------|------|
| **çŸ¥è¯†é—®ç­”** | `/api/knowledge/n8n` | `{question, answer}` | æœ€ç®€å•ï¼Œ2ä¸ªå­—æ®µ |
| **ç”¨æˆ·åˆ†äº«** | `/api/user-shares/n8n` | `{title, content}` | æœ€ç®€å•ï¼Œ2ä¸ªå­—æ®µ + æ™ºèƒ½åˆ†ç±» |
| **æ··åˆç±»å‹** | `/api/webhooks/n8n` | `{type, data}` | ç»Ÿä¸€æ¥å£ï¼Œæ”¯æŒå¤šç±»å‹ |

### ä½¿ç”¨ç¤ºä¾‹

#### 1. æäº¤çŸ¥è¯†é—®ç­”ï¼ˆæœ€ç®€ï¼‰

```bash
curl -X POST http://47.237.79.9:5002/api/knowledge/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "question": "Pháº«u thuáº­t mÅ©i cÃ³ Ä‘au khÃ´ng?",
    "answer": "KhÃ´ng Ä‘au vÃ¬ Ä‘Æ°á»£c gÃ¢y tÃª hoáº·c gÃ¢y mÃª."
  }'
```

#### 2. æäº¤ç”¨æˆ·åˆ†äº«ï¼ˆæœ€ç®€ï¼‰

```bash
curl -X POST http://47.237.79.9:5002/api/user-shares/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "title": "Tráº£i nghiá»‡m nÃ¢ng mÅ©i táº¡i TP.HCM",
    "content": "Chia sáº» kinh nghiá»‡m phá»¥c há»“i sau pháº«u thuáº­t..."
  }'
```

#### 3. ä½¿ç”¨é€šç”¨Webhook

```bash
curl -X POST http://47.237.79.9:5002/api/webhooks/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "type": "knowledge",
    "data": {
      "question": "é—®é¢˜",
      "answer": "ç­”æ¡ˆ"
    }
  }'
```

#### 4. æ‰¹é‡æäº¤

```bash
curl -X POST http://47.237.79.9:5002/api/webhooks/batch \
  -H "Content-Type: application/json" \
  -d '{
    "items": [
      {"type": "knowledge", "data": {"question": "Q1", "answer": "A1"}},
      {"type": "user_share", "data": {"title": "T1", "content": "C1"}}
    ]
  }'
```

---

## ğŸŒ å‰ç«¯é¡µé¢

### åŒ»é™¢æ¨¡å—

#### åˆ—è¡¨é¡µï¼š/reviews
- **åœ°å€**: http://47.237.79.9:5001/reviews
- **åŠŸèƒ½**:
  - 3åˆ—ç½‘æ ¼å±•ç¤º
  - åŸå¸‚ç­›é€‰ï¼ˆ5ä¸ªåŸå¸‚ï¼‰
  - åŠ¨æ€æ˜Ÿçº§æ˜¾ç¤º
  - åˆ†é¡µå¯¼èˆªï¼ˆ36å®¶/é¡µï¼‰
  - æµè§ˆæ•°æ˜¾ç¤º

**åŸå¸‚ç­›é€‰URL**ï¼š
- å…¨éƒ¨ï¼š`/reviews`
- èƒ¡å¿—æ˜ï¼š`/reviews?city=TP.HCM`
- æ²³å†…ï¼š`/reviews?city=HÃ %20Ná»™i`
- å²˜æ¸¯ï¼š`/reviews?city=ÄÃ %20Náºµng`
- æµ·é˜²ï¼š`/reviews?city=Háº£i%20PhÃ²ng`
- èŠ¹è‹´ï¼š`/reviews?city=Cáº§n%20ThÆ¡`

#### è¯¦æƒ…é¡µï¼š/reviews/[id]
- **åœ°å€**: http://47.237.79.9:5001/reviews/15
- **å†…å®¹**:
  - åŒ»é™¢åŸºæœ¬ä¿¡æ¯
  - è”ç³»æ–¹å¼ï¼ˆç”µè¯ã€é‚®ç®±ã€ç½‘ç«™ï¼‰
  - 4ä¸ªåª’ä½“å—ï¼ˆæœåŠ¡ã€è®¾æ–½ã€è®¤è¯ã€è¯„ä»·ï¼‰
  - ç›¸å…³åŒ»é™¢æ¨è

---

### çŸ¥è¯†é—®ç­”æ¨¡å—

#### åˆ—è¡¨é¡µï¼š/knowledge
- **åœ°å€**: http://47.237.79.9:5001/knowledge
- **åŠŸèƒ½**:
  - 3åˆ—ç½‘æ ¼å±•ç¤º
  - é—®é¢˜å’Œç­”æ¡ˆé¢„è§ˆ
  - åŒ»ç”Ÿä¿¡æ¯
  - ç‚¹èµæ•°ã€æµè§ˆæ•°
  - åˆ†é¡µå¯¼èˆª

#### è¯¦æƒ…é¡µï¼š/knowledge/[id]
- **åœ°å€**: http://47.237.79.9:5001/knowledge/1
- **å†…å®¹**:
  - å®Œæ•´é—®é¢˜å’Œç­”æ¡ˆ
  - åŒ»ç”Ÿä¿¡æ¯
  - ç‚¹èµåŠŸèƒ½
  - ç›¸å…³é—®é¢˜æ¨è

---

### ç”¨æˆ·åˆ†äº«æ¨¡å—

#### åˆ—è¡¨é¡µï¼š/sharing
- **åœ°å€**: http://47.237.79.9:5001/sharing
- **åŠŸèƒ½**:
  - 3åˆ—ç½‘æ ¼å±•ç¤º
  - æ ‡é¢˜å’Œå†…å®¹é¢„è§ˆ
  - ç‚¹èµæ•°ã€æµè§ˆæ•°
  - æ‰‹æœ¯ç±»å‹æ ‡ç­¾
  - åˆ†é¡µå¯¼èˆª

#### è¯¦æƒ…é¡µï¼š/sharing/[id]
- **åœ°å€**: http://47.237.79.9:5001/sharing/1
- **å†…å®¹**:
  - å®Œæ•´åˆ†äº«å†…å®¹
  - æ‰‹æœ¯ä¿¡æ¯
  - ç‚¹èµåŠŸèƒ½
  - ç›¸å…³åˆ†äº«æ¨è

---

## ğŸ› ï¸ é…ç½®æ–¹æ³•

### 1. æ·»åŠ åŒ»é™¢æ•°æ®

#### æ–¹æ³•Aï¼šé€šè¿‡è„šæœ¬æ‰¹é‡æ·»åŠ 

åˆ›å»ºè„šæœ¬æ–‡ä»¶ï¼š
```javascript
// backend/src/scripts/add-hospitals.js
import { models } from '../models/index.js';
const { Hospital } = models;

const hospitals = [
  {
    name: 'åŒ»é™¢åç§°',
    description: 'åŒ»é™¢æè¿°',
    address: 'å®Œæ•´åœ°å€',
    city: 'TP.HCM',
    district: 'Quáº­n 1',
    phone: '+84 28 xxxx xxxx',
    email: 'email@hospital.vn',
    website: 'https://hospital.vn',
    rating: 4.5,
    review_count: 1000,
    specialties: ['ä¸“ç§‘1', 'ä¸“ç§‘2'],
    services: ['æœåŠ¡1', 'æœåŠ¡2'],
    facilities: ['è®¾æ–½1', 'è®¾æ–½2'],
    certifications: ['è®¤è¯1', 'è®¤è¯2'],
    level: 'A',
    type: 'private',
    status: 'active',
    data_source: 'manual'
  }
];

async function addHospitals() {
  for (const data of hospitals) {
    await Hospital.create(data);
    console.log(`âœ… å·²æ·»åŠ : ${data.name}`);
  }
  process.exit(0);
}

addHospitals();
```

è¿è¡Œè„šæœ¬ï¼š
```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend
node src/scripts/add-hospitals.js
```

#### æ–¹æ³•Bï¼šé€šè¿‡N8N Webhook

```bash
curl -X POST http://47.237.79.9:5002/api/webhooks/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "type": "hospital",
    "data": {
      "name": "åŒ»é™¢åç§°",
      "description": "æè¿°",
      "city": "TP.HCM",
      ...
    }
  }'
```

---

### 2. æ·»åŠ çŸ¥è¯†é—®ç­”

#### æ–¹æ³•Aï¼šN8Nä¸“ç”¨æ¥å£ï¼ˆæ¨èï¼‰

```bash
curl -X POST http://47.237.79.9:5002/api/knowledge/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "question": "é—®é¢˜",
    "answer": "ç­”æ¡ˆ"
  }'
```

#### æ–¹æ³•Bï¼šæ ‡å‡†APIæ¥å£

```bash
curl -X POST http://47.237.79.9:5002/api/knowledge \
  -H "Content-Type: application/json" \
  -d '{
    "question": "é—®é¢˜",
    "answer": "ç­”æ¡ˆ",
    "category": "åˆ†ç±»",
    "doctor_name": "åŒ»ç”Ÿå"
  }'
```

---

### 3. æ·»åŠ ç”¨æˆ·åˆ†äº«

#### æ–¹æ³•Aï¼šN8Nä¸“ç”¨æ¥å£ï¼ˆæ¨èï¼‰

```bash
curl -X POST http://47.237.79.9:5002/api/user-shares/n8n \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æ ‡é¢˜",
    "content": "å†…å®¹"
  }'
```

**è‡ªåŠ¨åŠŸèƒ½**ï¼š
- âœ… ä½œè€…åè‡ªåŠ¨å¡«å……ä¸º"åŒ¿åç”¨æˆ·"
- âœ… æ‰‹æœ¯ç±»å‹æ™ºèƒ½è¯†åˆ«
- âœ… è¯„åˆ†é»˜è®¤5æ˜Ÿ

#### æ–¹æ³•Bï¼šæ ‡å‡†APIæ¥å£

```bash
curl -X POST http://47.237.79.9:5002/api/user-shares \
  -H "Content-Type: application/json" \
  -d '{
    "title": "æ ‡é¢˜",
    "content": "å†…å®¹",
    "author_name": "ä½œè€…",
    "surgery_type": "Pháº«u thuáº­t mÅ©i",
    "rating": 5
  }'
```

---

## ğŸ“Š æ•°æ®æŸ¥è¯¢

### 1. æŸ¥è¯¢æ‰€æœ‰æ•°æ®

```bash
# æŸ¥è¯¢æ‰€æœ‰åŒ»é™¢
curl http://47.237.79.9:5002/api/hospitals

# æŸ¥è¯¢æ‰€æœ‰çŸ¥è¯†é—®ç­”
curl http://47.237.79.9:5002/api/knowledge

# æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·åˆ†äº«
curl http://47.237.79.9:5002/api/user-shares
```

### 2. æŒ‰æ¡ä»¶ç­›é€‰

```bash
# æŒ‰åŸå¸‚æŸ¥è¯¢åŒ»é™¢
curl "http://47.237.79.9:5002/api/hospitals?city=TP.HCM"

# æŒ‰åˆ†ç±»æŸ¥è¯¢é—®ç­”
curl "http://47.237.79.9:5002/api/knowledge?category=Pháº«u%20thuáº­t%20mÅ©i"

# æŒ‰æ‰‹æœ¯ç±»å‹æŸ¥è¯¢åˆ†äº«
curl "http://47.237.79.9:5002/api/user-shares?surgery_type=Pháº«u%20thuáº­t%20mÅ©i"
```

### 3. æœç´¢

```bash
# æœç´¢åŒ»é™¢
curl "http://47.237.79.9:5002/api/hospitals?search=FV"

# æœç´¢é—®ç­”
curl "http://47.237.79.9:5002/api/knowledge?search=pháº«u%20thuáº­t"
```

### 4. ç›´æ¥æŸ¥è¯¢æ•°æ®åº“

```bash
# è¿›å…¥æ•°æ®åº“
sqlite3 /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend/data/medical.db

# æŸ¥è¯¢åŒ»é™¢
SELECT id, name, city, rating FROM hospitals LIMIT 10;

# ç»Ÿè®¡å„åŸå¸‚åŒ»é™¢æ•°
SELECT city, COUNT(*) FROM hospitals GROUP BY city;

# æŸ¥è¯¢çŸ¥è¯†é—®ç­”
SELECT id, question, category FROM knowledge LIMIT 10;

# æŸ¥è¯¢ç”¨æˆ·åˆ†äº«
SELECT id, title, surgery_type FROM user_shares LIMIT 10;
```

---

## ğŸš€ éƒ¨ç½²è¿ç»´

### æœåŠ¡ç®¡ç†

#### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# å‰ç«¯æœåŠ¡
systemctl status vietnam-medical.service

# åç«¯æœåŠ¡
systemctl status vietnam-medical-backend.service
```

#### é‡å¯æœåŠ¡
```bash
# é‡å¯å‰ç«¯
systemctl restart vietnam-medical.service

# é‡å¯åç«¯
systemctl restart vietnam-medical-backend.service

# åŒæ—¶é‡å¯
systemctl restart vietnam-medical.service vietnam-medical-backend.service
```

#### æŸ¥çœ‹æ—¥å¿—
```bash
# å‰ç«¯æ—¥å¿—
journalctl -u vietnam-medical.service -f

# åç«¯æ—¥å¿—
journalctl -u vietnam-medical-backend.service -f
```

### å®Œæ•´éƒ¨ç½²

```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®
./deploy.sh
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
1. åœæ­¢æœåŠ¡
2. å®‰è£…ä¾èµ–
3. æ„å»ºå‰ç«¯
4. é…ç½®systemd
5. å¯åŠ¨æœåŠ¡
6. å¥åº·æ£€æŸ¥

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/
â”œâ”€â”€ backend/                    # åç«¯ä»£ç 
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ api/               # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ hospitalRoutes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ knowledgeRoutes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ userShareRoutes.js
â”‚   â”‚   â”‚   â”œâ”€â”€ webhookRoutes.js
â”‚   â”‚   â”‚   â””â”€â”€ routes.js
â”‚   â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚   â”œâ”€â”€ Hospital.js
â”‚   â”‚   â”‚   â”œâ”€â”€ Knowledge.js
â”‚   â”‚   â”‚   â”œâ”€â”€ UserShare.js
â”‚   â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”‚   â”œâ”€â”€ scripts/           # æ•°æ®è„šæœ¬
â”‚   â”‚   â”‚   â””â”€â”€ insert-hospitals.js
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ server.js          # æœåŠ¡å…¥å£
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â””â”€â”€ medical.db         # SQLiteæ•°æ®åº“
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ src/                       # å‰ç«¯ä»£ç 
â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”œâ”€â”€ reviews.astro      # åŒ»é™¢åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ reviews/[id].astro # åŒ»é™¢è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ knowledge.astro    # çŸ¥è¯†é—®ç­”åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ knowledge/[id].astro
â”‚   â”‚   â”œâ”€â”€ sharing.astro      # ç”¨æˆ·åˆ†äº«åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ sharing/[id].astro
â”‚   â”œâ”€â”€ layouts/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ styles/
â”‚   â””â”€â”€ utils/
â”‚       â””â”€â”€ api.js             # APIè°ƒç”¨å·¥å…·
â”œâ”€â”€ docs/                      # æ–‡æ¡£
â”‚   â”œâ”€â”€ æ•°æ®åº“é…ç½®å¼€å‘æ–‡æ¡£.md  # æœ¬æ–‡æ¡£
â”‚   â”œâ”€â”€ çŸ¥è¯†é—®ç­”åŠŸèƒ½é…ç½®å®Œæˆ.md
â”‚   â”œâ”€â”€ ç”¨æˆ·åˆ†äº«åŠŸèƒ½é…ç½®å®Œæˆ.md
â”‚   â””â”€â”€ åŒ»é™¢è¯¦ç»†ä¿¡æ¯æ›´æ–°è¯´æ˜.md
â”œâ”€â”€ deploy.sh                  # éƒ¨ç½²è„šæœ¬
â””â”€â”€ package.json
```

---

## ğŸ¯ å¸¸ç”¨æ“ä½œ

### æ·»åŠ æ–°åŒ»é™¢

1. åˆ›å»ºè„šæœ¬ `/backend/src/scripts/add-my-hospital.js`
2. å®šä¹‰åŒ»é™¢æ•°æ®ï¼ˆå‚è€ƒä¸Šé¢çš„å®Œæ•´ç¤ºä¾‹ï¼‰
3. è¿è¡Œè„šæœ¬ï¼š`node src/scripts/add-my-hospital.js`
4. é‡å¯åç«¯ï¼š`systemctl restart vietnam-medical-backend.service`
5. é‡å¯å‰ç«¯ï¼š`systemctl restart vietnam-medical.service`

### æ‰¹é‡å¯¼å…¥é—®ç­”

1. å‡†å¤‡JSONæ•°æ®æ–‡ä»¶
2. ä½¿ç”¨æ‰¹é‡æ¥å£æäº¤
3. æˆ–åˆ›å»ºè„šæœ¬å¾ªç¯æ’å…¥

### æ›´æ–°åŒ»é™¢è¯„åˆ†

```bash
sqlite3 /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend/data/medical.db

UPDATE hospitals SET rating = 4.7 WHERE id = 15;
```

### æŸ¥çœ‹æ•°æ®ç»Ÿè®¡

```bash
curl http://47.237.79.9:5002/api/webhooks/sync-status
```

---

## ğŸ” æ•…éšœæ’æŸ¥

### 1. å‰ç«¯é¡µé¢æ˜¾ç¤ºæ—§æ•°æ®

**åŸå› **ï¼šæµè§ˆå™¨ç¼“å­˜  
**è§£å†³**ï¼šæ¸…é™¤ç¼“å­˜ `Ctrl + Shift + R`

### 2. APIè¿”å›ç©ºæ•°æ®

**æ£€æŸ¥**ï¼š
```bash
# æ£€æŸ¥åç«¯æœåŠ¡
systemctl status vietnam-medical-backend.service

# æ£€æŸ¥æ•°æ®åº“
sqlite3 /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend/data/medical.db "SELECT COUNT(*) FROM hospitals;"
```

### 3. N8Næäº¤å¤±è´¥

**æ£€æŸ¥**ï¼š
- URLæ˜¯å¦æ­£ç¡®
- Content-Typeæ˜¯å¦ä¸ºapplication/json
- æ•°æ®æ ¼å¼æ˜¯å¦æ­£ç¡®
- æŸ¥çœ‹åç«¯æ—¥å¿—ï¼š`journalctl -u vietnam-medical-backend.service -f`

### 4. æœåŠ¡æ— æ³•å¯åŠ¨

**æ£€æŸ¥**ï¼š
```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯
journalctl -u vietnam-medical-backend.service -n 50

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tlnp | grep 5002
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. æ•°æ®å½•å…¥

âœ… **æ¨è**ï¼š
- åŒ»é™¢æ•°æ®ï¼šé€šè¿‡è„šæœ¬æ‰¹é‡æ·»åŠ 
- çŸ¥è¯†é—®ç­”ï¼šé€šè¿‡N8Nä¸“ç”¨æ¥å£
- ç”¨æˆ·åˆ†äº«ï¼šé€šè¿‡N8Nä¸“ç”¨æ¥å£

âŒ **ä¸æ¨è**ï¼š
- ç›´æ¥æ“ä½œæ•°æ®åº“ï¼ˆå®¹æ˜“å‡ºé”™ï¼‰
- æ‰‹åŠ¨æ‹¼æ¥SQLï¼ˆä¸å®‰å…¨ï¼‰

### 2. å­—æ®µè¦æ±‚

**åŒ»é™¢æ•°æ®**ï¼š
- âœ… å¿…é¡»æä¾›ï¼šname, description
- âœ… æ¨èæä¾›ï¼šcity, address, phone, website
- âœ… è¯¦ç»†ä¿¡æ¯ï¼šservices, facilities, certificationsï¼ˆå„6-7é¡¹ï¼‰

**çŸ¥è¯†é—®ç­”**ï¼š
- âœ… å¿…é¡»æä¾›ï¼šquestion, answer
- âœ… æ¨èæä¾›ï¼šcategoryï¼ˆä¾¿äºç­›é€‰ï¼‰

**ç”¨æˆ·åˆ†äº«**ï¼š
- âœ… å¿…é¡»æä¾›ï¼štitle, content
- âœ… è‡ªåŠ¨å¡«å……ï¼šauthor_name, surgery_type, rating

### 3. è¯„åˆ†è®¾ç½®

**è¯„åˆ†èŒƒå›´**ï¼š
- èƒ¡å¿—æ˜å¸‚ã€æ²³å†…ï¼š4.2 - 4.8
- å²˜æ¸¯ã€æµ·é˜²ã€èŠ¹è‹´ï¼š4.0 - 4.5

**åˆ†å¸ƒå»ºè®®**ï¼š
- 4.7-4.8åˆ†ï¼š10%ï¼ˆé¡¶çº§åŒ»é™¢ï¼‰
- 4.4-4.6åˆ†ï¼š50%ï¼ˆä¸»æµåŒ»é™¢ï¼‰
- 4.0-4.3åˆ†ï¼š40%ï¼ˆæ™®é€šåŒ»é™¢ï¼‰

---

## ğŸ” å®‰å…¨æ³¨æ„

1. **APIè®¿é—®**ï¼šå·²é…ç½®CORSï¼Œä»…å…è®¸ç‰¹å®šåŸŸå
2. **é™æµ**ï¼šæ¯ä¸ªIP 15åˆ†é’Ÿæœ€å¤š100æ¬¡è¯·æ±‚
3. **æ•°æ®éªŒè¯**ï¼šæ‰€æœ‰è¾“å…¥éƒ½ç»è¿‡JoiéªŒè¯
4. **SQLæ³¨å…¥é˜²æŠ¤**ï¼šä½¿ç”¨Sequelize ORM
5. **XSSé˜²æŠ¤**ï¼šä½¿ç”¨helmetä¸­é—´ä»¶

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

### å¥åº·æ£€æŸ¥
```bash
curl http://47.237.79.9:5002/health
```

### APIä¿¡æ¯
```bash
curl http://47.237.79.9:5002/api/info
```

### æ•°æ®ç»Ÿè®¡
```bash
curl http://47.237.79.9:5002/api/webhooks/sync-status
```

---

## ğŸ‰ å¿«é€Ÿå¼€å§‹

### 1åˆ†é’Ÿå¿«é€Ÿæµ‹è¯•

```bash
# 1. æ·»åŠ ä¸€æ¡çŸ¥è¯†é—®ç­”
curl -X POST http://47.237.79.9:5002/api/knowledge/n8n \
  -H "Content-Type: application/json" \
  -d '{"question":"æµ‹è¯•é—®é¢˜","answer":"æµ‹è¯•ç­”æ¡ˆ"}'

# 2. æŸ¥çœ‹ç»“æœ
curl http://47.237.79.9:5002/api/knowledge

# 3. å‰ç«¯æŸ¥çœ‹
æµè§ˆå™¨è®¿é—®ï¼šhttp://47.237.79.9:5001/knowledge
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-10  
**ç»´æŠ¤è€…**: å¼€å‘å›¢é˜Ÿ

