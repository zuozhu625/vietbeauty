# è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›® - åŒ»é™¢ä¿¡æ¯çˆ¬è™«å¼€å‘æ–‡æ¡£

**ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-26 16:10  
**çŠ¶æ€**: âœ… ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­

---

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è§ˆ](#ç³»ç»Ÿæ¦‚è§ˆ)
2. [ç³»ç»Ÿæ¶æ„](#ç³»ç»Ÿæ¶æ„)
3. [æ•°æ®æ¨¡å‹](#æ•°æ®æ¨¡å‹)
4. [æ ¸å¿ƒæ¨¡å—è¯¦è§£](#æ ¸å¿ƒæ¨¡å—è¯¦è§£)
5. [éƒ¨ç½²ä¸é…ç½®](#éƒ¨ç½²ä¸é…ç½®)
6. [ä½¿ç”¨æŒ‡å—](#ä½¿ç”¨æŒ‡å—)
7. [æœ€ä½³å®è·µ](#æœ€ä½³å®è·µ)

---

## ç³»ç»Ÿæ¦‚è§ˆ

### é¡¹ç›®èƒŒæ™¯

è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®éœ€è¦æ”¶é›†122å®¶è¶Šå—åŒ»é™¢çš„è¯¦ç»†ä¿¡æ¯ï¼ŒåŒ…æ‹¬åŸºç¡€ä¿¡æ¯ã€æœåŠ¡é¡¹ç›®ã€è®¾æ–½è®¾å¤‡ã€èµ„è´¨è®¤è¯ç­‰ã€‚ä¸ºäº†é«˜æ•ˆåœ°ç®¡ç†è¿™äº›åŒ»é™¢æ•°æ®ï¼Œé¡¹ç›®é‡‡ç”¨äº†åˆ†å±‚çš„æ•°æ®å¤„ç†æ¶æ„ã€‚

### æ ¸å¿ƒç‰¹æ€§

- âœ… **å®Œæ•´çš„åŒ»é™¢ä¿¡æ¯æ¨¡å‹** - åŒ…å«30å¤šä¸ªå­—æ®µçš„è¯¦ç»†æ•°æ®ç»“æ„
- âœ… **å¤šæºæ•°æ®å¯¼å…¥** - æ”¯æŒExcelã€APIã€N8Nç­‰å¤šç§æ•°æ®æº
- âœ… **æ™ºèƒ½æ•°æ®æå–** - è‡ªåŠ¨è¯†åˆ«è¿é”åŒ»é™¢ï¼Œç»Ÿè®¡åŒ»é™¢åˆ†å¸ƒ
- âœ… **æ•°æ®éªŒè¯æœºåˆ¶** - ç¡®ä¿æ•°æ®å®Œæ•´æ€§å’Œä¸€è‡´æ€§
- âœ… **çµæ´»çš„æ‰©å±•æ€§** - æ”¯æŒè‡ªå®šä¹‰å­—æ®µå’Œæ•°æ®æº

### å½“å‰æ•°æ®è§„æ¨¡

| æŒ‡æ ‡ | æ•°é‡ |
|------|------|
| **åŒ»é™¢æ€»æ•°** | 122å®¶ |
| **æ•°æ®æ¥æº** | æ‰‹å·¥å½•å…¥ + ç½‘ç»œæ”¶é›† |
| **åŸå¸‚è¦†ç›–** | èƒ¡å¿—æ˜å¸‚ä¸ºä¸» |
| **ç±»å‹åˆ†å¸ƒ** | å…¬ç«‹ã€ç§ç«‹ã€å›½é™…æ··åˆ |
| **å¹³å‡è¯„åˆ†** | 4.7-4.9 æ˜Ÿ |

---

## ç³»ç»Ÿæ¶æ„

### å®Œæ•´çš„æ•°æ®æµå‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        æ•°æ®æ”¶é›†å±‚ (Multiple Sources)         â”‚
â”‚                                              â”‚
â”‚ â€¢ ç½‘ç»œæ‰‹å·¥æ”¶é›†                              â”‚
â”‚ â€¢ Excelè¡¨æ ¼å¯¼å…¥                             â”‚
â”‚ â€¢ APIæ¥å£å¯¼å…¥                               â”‚
â”‚ â€¢ N8Nå·¥ä½œæµ                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       æ•°æ®å¤„ç†å±‚ (Data Processing)           â”‚
â”‚                                              â”‚
â”‚ â€¢ Excelåˆ°SQLiteè½¬æ¢                         â”‚
â”‚ â€¢ æ•°æ®éªŒè¯å’Œæ¸…ç†                            â”‚
â”‚ â€¢ å­—æ®µæ˜ å°„å’Œè½¬æ¢                            â”‚
â”‚ â€¢ å»é‡å’Œåˆå¹¶                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      æ•°æ®åˆ†æå±‚ (Data Analysis)              â”‚
â”‚                                              â”‚
â”‚ â€¢ åŒ»é™¢ä¿¡æ¯æå–                              â”‚
â”‚ â€¢ è¿é”åŒ»é™¢è¯†åˆ«                              â”‚
â”‚ â€¢ åœ°ç†ä½ç½®ç»Ÿè®¡                              â”‚
â”‚ â€¢ åˆ†ç±»åˆ†å¸ƒåˆ†æ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      å­˜å‚¨å±‚ (Storage)                        â”‚
â”‚                                              â”‚
â”‚ â€¢ SQLiteæ•°æ®åº“                              â”‚
â”‚ â€¢ database.sqlite (å‰ç«¯å±•ç¤º)                â”‚
â”‚ â€¢ medical.db (æ™ºèƒ½ä½“è®­ç»ƒ)                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åº”ç”¨å±‚ (Application)                    â”‚
â”‚                                              â”‚
â”‚ â€¢ DQAåŒ»é™¢é—®ç­”ç”Ÿæˆ                          â”‚
â”‚ â€¢ å‰ç«¯é¡µé¢å±•ç¤º                              â”‚
â”‚ â€¢ APIæ¥å£æœåŠ¡                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶ | æ–‡ä»¶ | åŠŸèƒ½ |
|------|------|------|
| **Hospital æ¨¡å‹** | `backend/src/models/Hospital.js` | å®šä¹‰åŒ»é™¢æ•°æ®ç»“æ„ |
| **æ•°æ®æå–å™¨** | `backend/src/dqa/hospitalDataExtractor.js` | æå–å’Œåˆ†æåŒ»é™¢æ•°æ® |
| **æ•°æ®å¯¼å…¥è„šæœ¬** | `backend/src/scripts/insert-hospitals.js` | æ‰¹é‡å¯¼å…¥åŒ»é™¢æ•°æ® |
| **Excelè½¬SQLite** | `scripts/excel-to-sqlite.py` | Excelæ–‡ä»¶å¯¼å…¥å·¥å…· |
| **åŒ»é™¢APIè·¯ç”±** | `backend/src/api/hospitalRoutes.js` | æä¾›åŒ»é™¢APIæ¥å£ |

---

## æ•°æ®æ¨¡å‹

### Hospital è¡¨ç»“æ„

```sql
CREATE TABLE hospitals (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name VARCHAR(200) NOT NULL,              -- åŒ»é™¢åç§°
  description TEXT,                         -- åŒ»é™¢æè¿°
  address VARCHAR(500),                     -- åŒ»é™¢åœ°å€
  city VARCHAR(100),                        -- æ‰€åœ¨åŸå¸‚
  district VARCHAR(100),                    -- æ‰€åœ¨åŒºå¿
  phone VARCHAR(50),                        -- è”ç³»ç”µè¯
  email VARCHAR(100),                       -- é‚®ç®±
  website VARCHAR(500),                     -- å®˜ç½‘
  logo_url VARCHAR(500),                    -- Logo URL
  images JSON,                              -- åŒ»é™¢å›¾ç‰‡URLæ•°ç»„
  rating DECIMAL(3,2),                      -- ç»¼åˆè¯„åˆ† (0-5)
  review_count INTEGER DEFAULT 0,           -- è¯„ä»·æ•°é‡
  specialties JSON,                         -- ä¸“ç§‘é¢†åŸŸæ•°ç»„
  services JSON,                            -- æœåŠ¡é¡¹ç›®æ•°ç»„
  facilities JSON,                          -- è®¾æ–½è®¾å¤‡æ•°ç»„
  certifications JSON,                      -- è®¤è¯èµ„è´¨æ•°ç»„
  level ENUM('A','B','C','D'),             -- åŒ»é™¢ç­‰çº§
  type ENUM('public','private','international'), -- åŒ»é™¢ç±»å‹
  status ENUM('active','inactive','pending'), -- çŠ¶æ€
  source ENUM('n8n','manual','api'),       -- æ•°æ®æ¥æº
  external_id VARCHAR(100),                 -- å¤–éƒ¨ç³»ç»ŸID
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);
```

### å­—æ®µè¯´æ˜

#### åŸºç¡€å­—æ®µ
- **name** - åŒ»é™¢å…¨åï¼Œå¿…å¡«å­—æ®µ
- **city** - æ‰€åœ¨åŸå¸‚ï¼ˆè¶Šå—åŸå¸‚åï¼‰
- **district** - æ‰€åœ¨åŒºå¿/éƒ¡
- **address** - å®Œæ•´çš„åŒ»é™¢åœ°å€

#### è”ç³»ä¿¡æ¯
- **phone** - åŒ»é™¢è”ç³»ç”µè¯ï¼ˆè¶Šå—æ ¼å¼ï¼š+84å¼€å¤´ï¼‰
- **email** - å®˜æ–¹é‚®ç®±åœ°å€
- **website** - å®˜æ–¹ç½‘ç«™URL

#### è¯„ä»·ä¸åé¦ˆ
- **rating** - ç»¼åˆè¯„åˆ†ï¼ˆ0-5åˆ†ï¼Œä¿ç•™ä¸¤ä½å°æ•°ï¼‰
- **review_count** - æ€»è¯„ä»·æ•°é‡

#### ä¸“ä¸šä¿¡æ¯
- **specialties** - ä¸“ç§‘é¢†åŸŸæ•°ç»„ï¼ˆJSONæ ¼å¼ï¼‰
  ```json
  ["Tháº©m má»¹ khuÃ´n máº·t", "Tháº©m má»¹ ngá»±c", "Phá»¥c há»“i sau sinh"]
  ```

#### æœåŠ¡é¡¹ç›®
- **services** - æä¾›çš„æœåŠ¡é¡¹ç›®æ•°ç»„ï¼ˆJSONæ ¼å¼ï¼‰
  ```json
  [
    "TiÃªm Botox - XÃ³a nhÄƒn, nÃ¢ng cÆ¡ máº·t",
    "TiÃªm Filler - LÃ m Ä‘áº§y rÃ£nh nhÄƒn",
    "Laser trá»‹ nÃ¡m, tÃ n nhang"
  ]
  ```

#### è®¾æ–½è®¾å¤‡
- **facilities** - åŒ»é™¢è®¾æ–½è®¾å¤‡æ•°ç»„ï¼ˆJSONæ ¼å¼ï¼‰
  ```json
  [
    "PhÃ²ng má»• chuáº©n quá»‘c táº¿",
    "MÃ¡y laser Nd:YAG, CO2 fractional",
    "Há»‡ thá»‘ng gÃ¢y mÃª an toÃ n"
  ]
  ```

#### èµ„è´¨è®¤è¯
- **certifications** - åŒ»é™¢èµ„è´¨è®¤è¯æ•°ç»„ï¼ˆJSONæ ¼å¼ï¼‰
  ```json
  [
    "Chá»©ng nháº­n bá»‡nh viá»‡n háº¡ng A",
    "ISO 9001:2015",
    "Giáº¥y phÃ©p hoáº¡t Ä‘á»™ng cá»§a Sá»Ÿ Y táº¿"
  ]
  ```

#### åˆ†ç±»ä¿¡æ¯
- **level** - åŒ»é™¢ç­‰çº§ï¼ˆA/B/C/Dï¼ŒAä¸ºæœ€é«˜ç­‰çº§ï¼‰
- **type** - åŒ»é™¢ç±»å‹ï¼š
  - `public` - å…¬ç«‹åŒ»é™¢
  - `private` - ç§ç«‹åŒ»é™¢
  - `international` - å›½é™…åŒ»é™¢

#### å…ƒæ•°æ®
- **status** - æ•°æ®çŠ¶æ€ï¼š
  - `active` - æ´»è·ƒ
  - `inactive` - åœç”¨
  - `pending` - å¾…å®¡æ ¸
- **source** - æ•°æ®æ¥æºï¼š
  - `manual` - æ‰‹å·¥å½•å…¥
  - `api` - APIå¯¼å…¥
  - `n8n` - N8Nå·¥ä½œæµ

---

## æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 1. Hospital æ¨¡å‹ (Hospital.js)

**åŠŸèƒ½**: å®šä¹‰åŒ»é™¢æ•°æ®çš„Sequelize ORMæ¨¡å‹

**å…³é”®ç‰¹æ€§**:
- å®Œæ•´çš„å­—æ®µå®šä¹‰å’ŒéªŒè¯
- è¯„åˆ†èŒƒå›´æ ¡éªŒ (0-5)
- JSONå­—æ®µæ”¯æŒï¼ˆä¸“ç§‘ã€æœåŠ¡ã€è®¾æ–½ã€èµ„è´¨ï¼‰
- å¤šä¸ªç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢æ€§èƒ½

**ä¸»è¦ç´¢å¼•**:
- `city` - æŒ‰åŸå¸‚æŸ¥è¯¢
- `district` - æŒ‰åŒºå¿æŸ¥è¯¢
- `type` - æŒ‰åŒ»é™¢ç±»å‹æŸ¥è¯¢
- `level` - æŒ‰åŒ»é™¢ç­‰çº§æŸ¥è¯¢
- `rating` - æŒ‰è¯„åˆ†æ’åº
- `status` - æŒ‰çŠ¶æ€æŸ¥è¯¢

**ä½¿ç”¨ç¤ºä¾‹**:
```javascript
// åˆ›å»ºåŒ»é™¢è®°å½•
const hospital = await Hospital.create({
  name: 'FV Hospital',
  city: 'TP.HCM',
  district: 'Quáº­n 7',
  rating: 4.9,
  specialties: ['Tháº©m má»¹ khuÃ´n máº·t', 'Tráº» hÃ³a da'],
  services: ['TiÃªm Botox', 'TiÃªm Filler'],
  status: 'active'
});

// æŸ¥è¯¢æ´»è·ƒåŒ»é™¢
const hospitals = await Hospital.findAll({
  where: { status: 'active' },
  order: [['rating', 'DESC']]
});
```

### 2. åŒ»é™¢æ•°æ®æå–å™¨ (hospitalDataExtractor.js)

**åŠŸèƒ½**: æ™ºèƒ½æå–å’Œåˆ†æåŒ»é™¢æ•°æ®

#### 2.1 è·å–æ‰€æœ‰åŒ»é™¢

```javascript
async getAllHospitals()
```

- è·å–æ‰€æœ‰æ´»è·ƒåŒ»é™¢
- è¿”å›æŒ‰IDæ’åºçš„åŒ»é™¢æ¸…å•
- åŒ…å«å®Œæ•´çš„åŒ»é™¢ä¿¡æ¯

**ç¤ºä¾‹**:
```javascript
const hospitals = await hospitalDataExtractor.getAllHospitals();
// è¿”å›: [{id, name, city, rating, ...}, ...]
```

#### 2.2 è¯†åˆ«è¿é”åŒ»é™¢

```javascript
async getChainHospitals()
```

**åŠŸèƒ½**:
- æŒ‰åŒ»é™¢åç§°å‰ç¼€åˆ†ç»„
- è‡ªåŠ¨è¯†åˆ«è¿é”åŒ»é™¢å“ç‰Œ
- è¿‡æ»¤å‡ºå¤šäº1å®¶åˆ†åº—çš„åŒ»é™¢
- æŒ‰å“ç‰Œç»„ç»‡è¿”å›ç»“æœ

**è¯†åˆ«è§„åˆ™**:
```javascript
// å»é™¤ä»¥ä¸‹åç¼€æ¥è¯†åˆ«åŸºç¡€åç§°
- " - HÃ  Ná»™i", " - TP.HCM", " - ÄÃ  Náºµng" (åŸå¸‚)
- " Chi nhÃ¡nh 1", " Chi nhÃ¡nh 2" (åˆ†åº—)
- " Quáº­n 1", " Quáº­n 7" (åŒºå·)
```

**è¿”å›æ ¼å¼**:
```javascript
{
  "Bá»‡nh viá»‡n TÃ¢m Anh": [
    {id: 1, name: 'Bá»‡nh viá»‡n TÃ¢m Anh TP.HCM', ...},
    {id: 2, name: 'Bá»‡nh viá»‡n TÃ¢m Anh - HÃ  Ná»™i', ...}
  ],
  "VITA Clinic": [
    {id: 3, name: 'VITA Clinic - Quáº­n 1', ...},
    {id: 4, name: 'VITA Clinic - Quáº­n 7', ...}
  ]
}
```

#### 2.3 ç”ŸæˆåŒ»é™¢æ‘˜è¦æ¸…å•

```javascript
async generateHospitalSummary()
```

**åŠŸèƒ½**:
- ç”Ÿæˆæ‰€æœ‰åŒ»é™¢çš„æ‘˜è¦è¡¨æ ¼
- åŒ…å«å…³é”®ä¿¡æ¯ï¼ˆåç§°ã€åŸå¸‚ã€è¯„åˆ†ã€æœåŠ¡æ•°ç­‰ï¼‰
- ä¾¿äºå¿«é€ŸæŸ¥çœ‹åŒ»é™¢æ¦‚å†µ

**è¿”å›æ ¼å¼**:
```javascript
[
  {
    åºå·: 1,
    ID: 1,
    åŒ»é™¢åç§°: 'FV Hospital',
    åŸå¸‚: 'TP.HCM',
    åœ°åŒº: 'Quáº­n 7',
    ç­‰çº§: 'A',
    ç±»å‹: 'international',
    ç”µè¯: '+84 28 5411 3333',
    è¯„åˆ†: '4.9',
    è®¤è¯æ•°é‡: 4,
    æœåŠ¡é¡¹ç›®æ•°: 7
  }
]
```

#### 2.4 æŒ‰åŸå¸‚ç»Ÿè®¡åŒ»é™¢åˆ†å¸ƒ

```javascript
async getCityDistribution()
```

**åŠŸèƒ½**:
- ç»Ÿè®¡å„åŸå¸‚çš„åŒ»é™¢æ•°é‡
- åˆ†æåœ°ç†åˆ†å¸ƒ

**è¿”å›æ ¼å¼**:
```javascript
{
  'TP.HCM': 108,
  'HÃ  Ná»™i': 8,
  'ÄÃ  Náºµng': 4,
  'Háº£i PhÃ²ng': 2
}
```

### 3. æ‰¹é‡æ•°æ®å¯¼å…¥è„šæœ¬ (insert-hospitals.js)

**åŠŸèƒ½**: æ‰¹é‡å¯¼å…¥åŒ»é™¢æ•°æ®åˆ°æ•°æ®åº“

**ä¸»è¦æ­¥éª¤**:
1. æ¸…ç©ºç°æœ‰åŒ»é™¢æ•°æ®
2. å¾ªç¯éå†æ•°æ®æ•°ç»„ï¼Œé€æ¡æ’å…¥
3. æ¯æ¡è®°å½•åè¾“å‡ºæ—¥å¿—
4. æœ€åæ˜¾ç¤ºæ‰€æœ‰æ’å…¥çš„åŒ»é™¢

**ä½¿ç”¨æ–¹å¼**:
```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend
node src/scripts/insert-hospitals.js
```

**æ•°æ®æ ¼å¼**:
```javascript
{
  name: 'FV Hospital â€“ Dermatology & Lifestyle',
  description: 'åŒ»é™¢æè¿°...',
  address: '6 Nguyá»…n LÆ°Æ¡ng Báº±ng, PhÆ°á»ng TÃ¢n PhÃº, Quáº­n 7, TP.HCM',
  city: 'TP.HCM',
  district: 'Quáº­n 7',
  phone: '+84 28 5411 3333',
  email: 'info@fvhospital.com',
  website: 'https://www.fvhospital.com/',
  rating: 4.9,
  review_count: 2134,
  specialties: ['Tháº©m má»¹ khuÃ´n máº·t', 'Tráº» hÃ³a da'],
  services: ['Thread Lift', 'Profhilo', 'Sculptra'],
  facilities: ['CÆ¡ sá»Ÿ váº­t cháº¥t chuáº©n quá»‘c táº¿', '...'],
  certifications: ['Chá»©ng nháº­n JCI', '...'],
  level: 'A',
  type: 'international',
  status: 'active',
  source: 'manual'
}
```

### 4. Excel è½¬ SQLite å·¥å…· (excel-to-sqlite.py)

**åŠŸèƒ½**: å°†Excelæ–‡ä»¶å¯¼å…¥åˆ°SQLiteæ•°æ®åº“

**ä¸»è¦åŠŸèƒ½**:
- æ”¯æŒå¤šç§Excelæ ¼å¼ (.xlsx, .xlsç­‰)
- è‡ªåŠ¨æ•°æ®æ¸…ç†å’ŒéªŒè¯
- çµæ´»çš„åˆ—åè½¬æ¢
- è¯¦ç»†çš„è¿›åº¦æç¤º

**ä½¿ç”¨æ–¹å¼**:
```bash
python3 scripts/excel-to-sqlite.py <excel_file> <db_file> <table_name> [sheet_name]
```

**ç¤ºä¾‹**:
```bash
# å¯¼å…¥åŒ»é™¢æ•°æ®
python3 scripts/excel-to-sqlite.py hospitals.xlsx backend/data/database.sqlite hospitals

# å¯¼å…¥ç‰¹å®šå·¥ä½œè¡¨
python3 scripts/excel-to-sqlite.py data.xlsx backend/data/database.sqlite hospitals "Sheet1"
```

**æ•°æ®æ¸…ç†è¿‡ç¨‹**:
1. è¯»å–Excelæ–‡ä»¶
2. å¡«å……ç©ºå€¼ä¸ºç©ºå­—ç¬¦ä¸²
3. æ¸…ç†åˆ—åï¼ˆç§»é™¤ç‰¹æ®Šå­—ç¬¦ï¼‰
4. è½¬æ¢åˆ—åä¸ºå°å†™ä¸‹åˆ’çº¿æ ¼å¼
5. è‡ªåŠ¨æ·»åŠ IDåˆ—ï¼ˆå¦‚ä¸å­˜åœ¨ï¼‰
6. å¯¼å…¥åˆ°SQLiteè¡¨

---

## éƒ¨ç½²ä¸é…ç½®

### ç¯å¢ƒè¦æ±‚

**åç«¯ç¯å¢ƒ**:
- Node.js 14+
- npm æˆ– yarn
- SQLite3

**Pythonç¯å¢ƒ**:
- Python 3.6+
- pandasåº“
- openpyxlåº“

### å®‰è£…æ­¥éª¤

#### 1. å®‰è£…Node.jsä¾èµ–

```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend
npm install

# éªŒè¯å®‰è£…
npm list sequelize
```

#### 2. å®‰è£…Pythonä¾èµ–

```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®

# å®‰è£…pandaså’Œopenpyxl
pip install pandas openpyxl

# éªŒè¯å®‰è£…
python3 -c "import pandas; print('pandas OK')"
```

#### 3. åˆå§‹åŒ–æ•°æ®åº“

```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend

# åˆå§‹åŒ–æ•°æ®åº“è¡¨ç»“æ„
npm run init-db

# æ’å…¥åŒ»é™¢æ•°æ®
node src/scripts/insert-hospitals.js
```

### é…ç½®è¯´æ˜

#### æ•°æ®åº“é…ç½®

**æ–‡ä»¶**: `backend/src/models/index.js`

```javascript
const sequelize = new Sequelize({
  dialect: 'sqlite',
  storage: path.join(__dirname, '../../data/database.sqlite'),
  logging: false,  // å…³é—­SQLæ—¥å¿—
  timestamps: true // è‡ªåŠ¨æ·»åŠ createdAtå’ŒupdatedAt
});
```

#### åŒ»é™¢æ•°æ®é…ç½®

**æ–‡ä»¶**: `backend/src/scripts/insert-hospitals.js`

ä¿®æ”¹ `hospitalsData` æ•°ç»„æ¥æ·»åŠ æˆ–æ›´æ–°åŒ»é™¢ä¿¡æ¯

---

## ä½¿ç”¨æŒ‡å—

### 1. æ‰¹é‡å¯¼å…¥åŒ»é™¢æ•°æ®

```bash
cd /root/è¶Šå—åŒ»ç–—æ•´å½¢é¡¹ç›®/backend
node src/scripts/insert-hospitals.js
```

**è¾“å‡ºç¤ºä¾‹**:
```
å¼€å§‹æ’å…¥åŒ»é™¢æ•°æ®...
å·²æ¸…ç©ºç°æœ‰åŒ»é™¢æ•°æ®
âœ… å·²æ’å…¥åŒ»é™¢: Bá»‡nh viá»‡n Da liá»…u TP.HCM (ID: 1)
âœ… å·²æ’å…¥åŒ»é™¢: FV Hospital (ID: 2)
...
ğŸ‰ æˆåŠŸæ’å…¥ 122 å®¶åŒ»é™¢æ•°æ®

ğŸ“‹ æ•°æ®åº“ä¸­çš„åŒ»é™¢åˆ—è¡¨ï¼š
  1. Bá»‡nh viá»‡n Da liá»…u TP.HCM - TP.HCM - è¯„åˆ†: 4.7â­
  2. FV Hospital â€“ Dermatology & Lifestyle - TP.HCM - è¯„åˆ†: 4.9â­
```

### 2. ä»Excelå¯¼å…¥åŒ»é™¢æ•°æ®

**å‡†å¤‡Excelæ–‡ä»¶**:
- ç¬¬ä¸€è¡Œä¸ºåˆ—å
- æ¯è¡Œä¸€æ¡åŒ»é™¢è®°å½•
- æ”¯æŒçš„åˆ—: name, description, address, city, district, phoneç­‰

**æ‰§è¡Œå¯¼å…¥**:
```bash
python3 scripts/excel-to-sqlite.py hospitals.xlsx \
  backend/data/database.sqlite hospitals
```

**è¾“å‡ºç¤ºä¾‹**:
```
ğŸ“– æ­£åœ¨è¯»å–Excelæ–‡ä»¶: hospitals.xlsx
âœ… æˆåŠŸè¯»å– 122 è¡Œæ•°æ®
ğŸ“‹ åˆ—å: ['name', 'city', 'phone', ...]
ğŸ§¹ æ­£åœ¨æ¸…ç†æ•°æ®...
ğŸ”— æ­£åœ¨è¿æ¥æ•°æ®åº“: backend/data/database.sqlite
ğŸ“¥ æ­£åœ¨å¯¼å…¥æ•°æ®åˆ°è¡¨: hospitals
âœ… æˆåŠŸå¯¼å…¥ 122 æ¡è®°å½•åˆ°è¡¨ hospitals
```

### 3. æå–åŒ»é™¢æ•°æ®

**è·å–æ‰€æœ‰åŒ»é™¢**:
```bash
curl http://localhost:5002/api/hospitals
```

**æŒ‰åŸå¸‚æŸ¥è¯¢**:
```bash
curl "http://localhost:5002/api/hospitals?city=TP.HCM"
```

**æŒ‰è¯„åˆ†æ’åº**:
```bash
curl "http://localhost:5002/api/hospitals?sort=rating&order=DESC"
```

### 4. åˆ†æåŒ»é™¢æ•°æ®

**è·å–è¿é”åŒ»é™¢åˆ†æ**:
```bash
curl http://localhost:5002/api/dqa/chain-hospitals/analyze
```

**è·å–åŒ»é™¢åˆ†å¸ƒç»Ÿè®¡**:
```bash
curl http://localhost:5002/api/hospitals/distribution
```

---

## æœ€ä½³å®è·µ

### 1. æ•°æ®å¯¼å…¥æœ€ä½³å®è·µ

#### æ•°æ®éªŒè¯
- âœ… å¯¼å…¥å‰æ£€æŸ¥åŒ»é™¢åç§°æ˜¯å¦ä¸ºç©º
- âœ… éªŒè¯ç”µè¯å·ç æ ¼å¼
- âœ… æ£€æŸ¥åŸå¸‚æ˜¯å¦æœ‰æ•ˆ
- âœ… éªŒè¯è¯„åˆ†èŒƒå›´ (0-5)

#### é”™è¯¯å¤„ç†
```javascript
try {
  // æ•°æ®å¯¼å…¥
} catch (error) {
  logger.error('å¯¼å…¥å¤±è´¥:', error);
  // å›æ»šæ•°æ®
  await Hospital.destroy({ where: {} });
}
```

#### æ€§èƒ½ä¼˜åŒ–
```javascript
// ä½¿ç”¨æ‰¹é‡æ’å…¥è€Œä¸æ˜¯é€æ¡æ’å…¥
await Hospital.bulkCreate(hospitalsData, {
  individualHooks: true  // è§¦å‘ä¸ªåˆ«é’©å­
});
```

### 2. æ•°æ®è´¨é‡æ§åˆ¶

#### å­—æ®µè§„èŒƒ
- **åŒ»é™¢åç§°**: é¿å…ç‰¹æ®Šç¬¦å·ï¼Œä½¿ç”¨æ ‡å‡†è¶Šå—æ–‡
- **ç”µè¯å·ç **: ç»Ÿä¸€ä½¿ç”¨ +84 å¼€å¤´çš„æ ¼å¼
- **è¯„åˆ†**: å¿…é¡»æ˜¯0-5ä¹‹é—´çš„æ•°å­—
- **åŸå¸‚**: ä½¿ç”¨æ ‡å‡†çš„è¶Šå—åŸå¸‚å

#### æ•°æ®ä¸€è‡´æ€§
```javascript
// æ’å…¥å‰çš„æ•°æ®éªŒè¯
if (!hospitalData.name || hospitalData.name.trim() === '') {
  throw new Error('åŒ»é™¢åç§°ä¸èƒ½ä¸ºç©º');
}

if (hospitalData.rating < 0 || hospitalData.rating > 5) {
  throw new Error('è¯„åˆ†å¿…é¡»åœ¨0-5ä¹‹é—´');
}

if (!hospitalData.city) {
  throw new Error('åŸå¸‚ä¿¡æ¯ä¸èƒ½ä¸ºç©º');
}
```

### 3. å®šæœŸå¤‡ä»½

```bash
# å¤‡ä»½åŒ»é™¢æ•°æ®
sqlite3 backend/data/database.sqlite \
  ".backup backup_hospitals_$(date +%Y%m%d).db"

# å¯¼å‡ºä¸ºCSV
sqlite3 backend/data/database.sqlite \
  ".mode csv" \
  ".output hospitals_$(date +%Y%m%d).csv" \
  "SELECT * FROM hospitals;"
```

### 4. ç›‘æ§å’Œæ—¥å¿—

```javascript
// æŸ¥çœ‹å¯¼å…¥æ—¥å¿—
tail -f backend/logs/app.log | grep -i hospital

// ç»Ÿè®¡æ•°æ®
sqlite3 backend/data/database.sqlite \
  "SELECT COUNT(*) FROM hospitals WHERE status='active';"

// æŒ‰ç±»å‹ç»Ÿè®¡
sqlite3 backend/data/database.sqlite \
  "SELECT type, COUNT(*) FROM hospitals GROUP BY type;"
```

---

## å¸¸è§é—®é¢˜

### Q1: å¦‚ä½•æ·»åŠ æ–°åŒ»é™¢ï¼Ÿ

**A**: å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼ï¼š

1. **ç›´æ¥æ’å…¥æ•°æ®åº“**:
```javascript
const hospital = await Hospital.create({
  name: 'æ–°åŒ»é™¢åç§°',
  city: 'TP.HCM',
  // ... å…¶ä»–å­—æ®µ
});
```

2. **é€šè¿‡APIåˆ›å»º**:
```bash
curl -X POST http://localhost:5002/api/hospitals \
  -H "Content-Type: application/json" \
  -d '{"name":"æ–°åŒ»é™¢","city":"TP.HCM",...}'
```

3. **æ‰¹é‡å¯¼å…¥**:
ç¼–è¾‘ `insert-hospitals.js` ä¸­çš„ `hospitalsData` æ•°ç»„ï¼Œæ·»åŠ æ–°åŒ»é™¢ä¿¡æ¯ï¼Œç„¶åè¿è¡Œè„šæœ¬ã€‚

### Q2: å¦‚ä½•æ›´æ–°åŒ»é™¢ä¿¡æ¯ï¼Ÿ

**A**:
```javascript
// æŒ‰IDæ›´æ–°
await Hospital.update(
  { rating: 4.8, review_count: 1500 },
  { where: { id: 1 } }
);

// æŸ¥è¯¢åæ›´æ–°
const hospital = await Hospital.findByPk(1);
hospital.rating = 4.8;
await hospital.save();
```

### Q3: è¿é”åŒ»é™¢è¯†åˆ«ä¸æ­£ç¡®å¦‚ä½•å¤„ç†ï¼Ÿ

**A**: ç¼–è¾‘ `hospitalDataExtractor.js` ä¸­çš„ `extractBaseName` æ–¹æ³•ï¼Œæ·»åŠ æ–°çš„æ­£åˆ™è¡¨è¾¾å¼è§„åˆ™æ¥è¯†åˆ«åŒ»é™¢å“ç‰Œã€‚

### Q4: å¦‚ä½•å¯¼å‡ºåŒ»é™¢æ•°æ®ï¼Ÿ

**A**:
```bash
# å¯¼å‡ºä¸ºJSON
sqlite3 backend/data/database.sqlite \
  "SELECT json_group_object(id, json_object('name', name, 'city', city)) \
   FROM hospitals;" > hospitals.json

# å¯¼å‡ºä¸ºCSV
sqlite3 backend/data/database.sqlite \
  ".mode csv" \
  ".output hospitals.csv" \
  "SELECT * FROM hospitals;"
```

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-10-26 16:10  
**ç»´æŠ¤äººå‘˜**: å¼€å‘å›¢é˜Ÿ  
**çŠ¶æ€**: âœ… ç”Ÿäº§ç¯å¢ƒè¿è¡Œä¸­

**ç›¸å…³é¡¹ç›®**:
- ğŸ¤– DQAåŒ»é™¢è‡ªåŠ¨é—®ç­”ç³»ç»Ÿ
- ğŸ¤– è¶Šå—è¯­é—®ç­”ç¿»è¯‘æ™ºèƒ½ä½“
- ğŸ¤– é—®ç­”è´¨é‡æ£€æŸ¥æ™ºèƒ½ä½“
